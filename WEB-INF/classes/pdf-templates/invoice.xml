<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html"/>
<xsl:template match="/">
<HTML>
<BODY bgcolor="#FFFFE0">
<TABLE border="0" width="100%"><TR><TD>
<H1>Invoice #
<xsl:value-of select="invoice/@number"/>,<BR/>
<xsl:value-of select="invoice/@date"/>
</H1>
</TD><TD align="left"><img src="sax_extractData_logo.gif"/>
</TD></TR></TABLE>

<TABLE border="0" width="100%">
  <TR valign="top">
    <TD>
      <xsl:for-each select="/invoice/patient">
            To: <xsl:value-of select="@firstname"/><xsl:text> </xsl:text>
                <xsl:value-of select="@familyname"/>
            <BR/>Account #<xsl:value-of select="@SSN"/>
            <BR/>
            <xsl:value-of select="address/@line1"/><BR/>
            <xsl:if test="address/@line2!=''">
                <xsl:value-of select="address/@line2"/><BR/>
            </xsl:if>
            <xsl:value-of select="address/@city"/>,
            <xsl:value-of select="address/@state"/>
            <xsl:value-of select="address/@zip"/><BR/>
      </xsl:for-each>
    </TD>
    <TD>
        <xsl:for-each select="/invoice/insurance">
            Insurance: <xsl:value-of select="@name"/><BR/>
            Plan name: <xsl:value-of select="@planname"/><BR/>
            Plan #<xsl:value-of select="@plannumber"/><BR/>
            <xsl:value-of select="address/@line1"/><BR/>
            <xsl:if test="address/@line2!=''">
                <xsl:value-of select="address/@line2"/><BR/>
            </xsl:if>
            <xsl:value-of select="address/@city"/>,
            <xsl:value-of select="address/@state"/>
            <xsl:value-of select="address/@zip"/><BR/>
            <xsl:value-of select="phone/@number"/><BR/>
      </xsl:for-each>
    </TD>
  </TR>
</TABLE>
<P> </P>
<TABLE border="1" width="100%">
  <TR>
    <TD width="20%">Code</TD>
    <TD width="20%">Name</TD>
    <TD width="20%">Cost</TD>
    <TD width="20%">Insurance estimate</TD>
    <TD width="20%">Submitted</TD>
  </TR>
  <xsl:for-each select="/invoice/procedure">
  <TR>
    <TD width="20%"><xsl:value-of select="@code"/></TD>
    <TD width="20%"><xsl:value-of select="@name"/></TD>
    <TD width="20%"><xsl:value-of select="@cost"/></TD>
    <TD width="20%"><xsl:value-of select="@insurance_estimate"/></TD>
    <TD width="20%"><xsl:value-of select="@submitted"/></TD>
  </TR>
  </xsl:for-each>
</TABLE>
<P> </P>
</BODY>
</HTML>
</xsl:template>
</xsl:stylesheet>