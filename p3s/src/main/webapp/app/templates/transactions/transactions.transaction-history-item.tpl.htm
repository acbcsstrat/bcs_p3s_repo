<div class="row m-b-md">
	<div class="col-md-12 col-lg-12 col-xl-12">
		<nav>
			<ul class="view-nav">
				<li class="view-nav__item pill-radius active">Transaction Details</li>
			</ul>
		</nav>
	</div>
</div>

<div class="content-panel">
	<div class="bg-white">
		<uib-tabset type="pills" active="activeSelectedTab">
			<uib-tab heading="Transaction Details" index="0" data-ng-hide="true">
				<div class="content-panel__head border-grey-xs--btm">
					<div class="row d-flex align-items-center m-b-sm">
						<div class="col-md-6 col-lg-6 col-xl-2">
							<p class="font-weight-bold font-h4">Transaction ID</p>
							<p class="font-h4" data-ng-bind="$ctrl.transactionHistoryItem.p3S_TransRef"></p>
						</div>
						<div class="col-md-6 col-lg-6 col-xl-2 text-md-right text-lg-right text-xl-left">
							<p class="font-weight-bold font-h4">Transaction Initated</p>
							<p class="font-h4">{{$ctrl.transactionHistoryItem.transStartDate | date: 'MM/dd/yy'}}</p>
						</div>
						<div class="col-md-12 col-lg-12 col-xl-8 text-right">
<!-- 							<p class="font-weight-bold font-h4 d-none d-xl-block">{{$ctrl.transactionHistoryItem.latestTransStatus}}</p> -->
							<div data-ng-class="($ctrl.transactionHistoryItem.hasFailed == true ? 'failed' : 'success')">
								<div class="steps">
								    <ul id="progressTracker" class="steps-container d-flex justify-content-between">
								        <li data-ng-repeat="li in $ctrl.transStatus track by $index" data-ng-init="$ctrl.checkProgress()" data-ng-class="(li.complete == true ? 'complete': '') + ' ' + (li.active == true ? 'active': '')">
								            <div class="step font-body cursor-help" tooltip-placement="{{li.position}}" uib-tooltip="{{li.tip}}" tooltip-class="trackerStep">
								                <div class="step-image"><span></span></div>
								                <div class="step-current"><span>{{li.status}}</span></div>
								            </div>
								        </li>		
								    </ul>
								    <div data-ng-class="($ctrl.hasFailed == true ? 'failed-step-bar' : 'step-bar')" data-ng-style="{ 'width': $ctrl.transactionProgress + '%' }"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div data-ng-repeat="transaction in $ctrl.transactionHistoryItem.serviceUIs | filter: transactionsFilter" class="border-grey-xs--btm">
					<div class="content-panel__body">
						<div class="row">
							<div class="col-md-12 col-lg-6 col-xl-6 md-m-b-md">
								<div class="d-none d-lg-block m-b-sm">
									<p class="font-weight-bold font-h4 m-b-xs">App No: 
										<span class="font-weight-normal" data-ng-bind="transaction.patentUI.patentApplicationNumber"></span>
									</p>
									<p class="font-weight-bold font-h4 m-b-xs">Client Ref: 
										<span data-ng-if="transaction.patentUI.clientRef !== ''" class="font-weight-normal" data-ng-bind="transaction.patentUI.clientRef"></span>
										<span data-ng-if="transaction.patentUI.clientRef == ''" class="font-weight-normal txt-grey">[No client description provided]</span>
									</p>
									<p class="font-weight-bold font-h4">Description: 
										<span class="font-weight-normal" data-ng-bind="transaction.patentUI.title"></span>
									</p>
								</div>
								<div class="d-none d-sm-none d-md-block d-lg-none">
									<div class="p-b-sm">
										<div class="row">
											<div class="col-md-6">
												<p class="font-weight-bold font-h4 m-b-xs">App No: <span class="font-weight-normal" data-ng-bind="transaction.patentUI.patentApplicationNumber"></span></p>
											</div>
											<div class="col-md-6 text-right">
												<p class="font-weight-bold font-h4 m-b-xs">Client Ref: 
													<span data-ng-if="transaction.patentUI.clientRef !== ''" class="font-weight-normal" data-ng-bind="transaction.patentUI.clientRef"></span>
													<span data-ng-if="transaction.patentUI.clientRef == ''" class="font-weight-normal txt-grey">[No client description provided]</span>
												</p>
											</div>
											<div class="col-md-12">
												<p class="font-weight-bold font-h4">Description: <span class="font-weight-normal" data-ng-bind="transaction.patentUI.title"></span></p>
											</div>
										</div>
									</div>									
								</div>									
								<div class="border-grey-xs--btm border-grey-xs--top p-tb-sm m-b-sm">
									<div class="d-none d-md-none d-lg-block">
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-weight-bold font-body">Official fee: </p>
											</div>
											<div class="col-md-6">
												<p class="font-body">$ {{(transaction.serviceFeeUI.totalOfficialFeeUSD || '0.00') | number: 2}}</p>
											</div>
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-weight-bold font-body">Processing fee: </p>
											</div>
											<div class="col-md-6">
												<p class="font-body">$ {{(transaction.serviceFeeUI.processingFeeUSD || '0.00') | number: 2}}</p>
												
											</div>
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-weight-bold font-body">Express fee: </p>
											</div>
											<div class="col-md-6">
												<p class="font-body">$ {{(transaction.serviceFeeUI.expressFeeUSD || '0.00') | number: 2}}</p>
											</div>
										</div>
										<div class="row">		
											<div class="col-md-6">
												<p class="font-weight-bold font-body">Urgent clearance fee: </p>
											</div>
											<div class="col-md-6">
												<p class="font-body">$ {{(transaction.serviceFeeUI.urgentFeeUSD || '0.00') | number: 2}}</p>
											</div>	
										</div>
									</div>
									<div class="d-none d-sm-none d-md-block d-lg-none">
										<div class="row">
											<div class="col-md-3 md-m-b-xs">
												<p class="font-weight-bold font-body">Official fee: </p>
											</div>
											<div class="col-md-3">
												<p class="font-body">$ {{(transaction.serviceFeeUI.officialFeeUSD || '0.00') | number: 2}}</p>
											</div>
											<div class="col-md-3">
												<p class="font-weight-bold font-body">Processing fee: </p>
											</div>
											<div class="col-md-3">
												<p class="font-body">$ {{(transaction.serviceFeeUI.ProcessingFeeUSD || '0.00') | number: 2}}</p>
											</div>
											<div class="col-md-3">
												<p class="font-weight-bold font-body">Express fee: </p>
											</div>
											<div class="col-md-3">
												<p class="font-body">$ {{(transaction.serviceFeeUI.expressFeeUSD || '0.00') | number: 2}}</p>
											</div>												
											<div class="col-md-3">
												<p class="font-weight-bold font-body">Urgent clearance fee: </p>
											</div>
											<div class="col-md-3">
												<p class="font-body">$ {{(transaction.serviceFeeUI.urgentFeeUSD || '0.00') | number: 2}}</p>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3 col-lg-6 col-xl-6">
										<p class="font-weight-bold font-body">Total: </p>
									</div>
									<div class="col-md-9 col-lg-6 col-xl-6">
										<p>$ {{(transaction.serviceFeeUI.subTotalUSD || '0.00') | number: 2}}</p>
									</div>	
								</div>
							</div>					
							<div class="col-md-12 col-lg-6 col-xl-6 text-xs-center">
								<div class="content-panel__body bg-light-grey2 bg-info-icon h-100">
									<div class="progress-trans">
										<p class="font-h4 font-weight-bold m-b-sm" data-ng-if="$ctrl.transactionHistoryItem.hasFailed">Failed</p>
										<p class="font-h4 font-weight-bold m-b-sm" data-ng-if="!$ctrl.transactionHistoryItem.hasFailed">Completed</p>
										<div class="progress-tracker m-b-sm">
											<div data-ng-if="$ctrl.transactionHistoryItem.hasFailed">
												<uib-progress><uib-bar class="bg-phase-red pill-radius tracker-item" value="$ctrl.patentProgress" max="100"></uib-bar></uib-progress>
											</div>
											<div data-ng-if="!$ctrl.transactionHistoryItem.hasFailed">
												<uib-progress><uib-bar class="bg-phase-green pill-radius tracker-item" value="$ctrl.patentProgress" max="100"></uib-bar></uib-progress>													
											</div>
										</div>
										<p class="font-body" data-ng-if="$ctrl.transactionHistoryItem.failureReason" ng-bind="$ctrl.transactionHistoryItem.failureReason"></p>	
										<p class="font-body" data-ng-if="!$ctrl.transactionHistoryItem.failureReason">We've had confirmation that your patent has been successfully renewed by the EPO.  You can download copies of the renewal certificate and the invoice below.</p>
									</div>
								</div>
							</div>
						</div>
						<div data-ng-if="transaction.certificateUrl" class="row m-t-sm">
							<div class="col-xl-12 d-flex justify-content-end">
								<div class="btn-default">
									<a data-ng-href="{{transaction.certificateUrl}}" class="btn btn--lg font-body font-weight-medium bg-phase-green pill-radius txt-white" target="_blank">Certificate <i class="fa fa-file-pdf-o fa-1x m-l-xs"></i></a>				
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="content-panel__body">
					<div class="row">
						<div class="col-xl-12 d-flex align-items-center justify-content-end">
							<a data-ng-href="{{$ctrl.transactionHistoryItem.invoiceUrl}}"  class="btn btn--lg btn--green pill-radius" target="_blank">Invoice <i class="fa fa-file-pdf-o fa-1x m-l-xs"></i></a>
						</div>						
					</div>
				</div>
			</uib-tab>
		</uib-tabset>
	</div>
</div>