<transactionnav></transactionnav>

<div class="row m-b-md">
	<div class="col-md-4 offset-md-8 col-lg-3 offset-lg-9 col-xl-3 offset-xl-9">
		<form class="form-inline">
			<div class="input-group w-100">
				<input type="text" class="form-control pill-radius font-body" name="filter" ng-model="$ctrl.tableParams.filter()['p3S_TransRef']" placeholder="Transaction ID">
				<div class="input-group-addon pill-radius"><i class="fa fa-search"></i></div>				
			</div>
		</form>
	</div>
</div>

<div class="row">
	<div class="col-md-12 col-lg-12 col-xl-12">
		<div class="row m-b-md">
			<div class="col-md-12 table-scroll p-r-none" id="scrollable-area">
				<table ng-table="$ctrl.tableParams" class="table font-body t-list" show-filter="false" fixed-table-headers="scrollable-area">
				    <tr ng-repeat="row in $data" ng-click="$ctrl.rowSelect($event); $ctrl.colourPhase(patent)" ui-sref-active="active">
				        <td width="15%" title="'Transaction ID'" filter="{ transId: 'text'}" sortable="'transId'" >
						<a class="txt-black" ui-sref="transaction-history.transaction-history-item({transHistoryId: row.id})" disabled>{{row.p3S_TransRef}}</a>
				        </td>
				        <td width="10%" title="'No. of patents'" filter="{ 'renewalUIs.length': 'text'}" sortable="'renewalUIs.length'">
						{{row.renewalUIs.length}}
				        </td>
				        <td width="15%" title="'App No.'">
							<span ng-if="row.renewalUIs.length == 1" ng-repeat="item in row.renewalUIs">
								<span ng-if="item.patentUI.patentApplicationNumber.length">
									{{item.patentUI.patentApplicationNumber}}<br>
								</span>								
							</span>
							<select ng-if="row.renewalUIs.length > 1" ng-options="item.patentUI.patentApplicationNumber for item in row.renewalUIs" ng-model="row.selectedOption" class="pill-radius p-select-option border-xs-grey">
								<option value="" disabled selected>Multiple</option>									
							</select>	
				        </td>
				        <td width="15%" data-title="'Client Ref'" filter="{ 'clientRef': 'text'}" sortable="'clientRef'">
							<span ng-if="row.renewalUIs.length == 1" ng-repeat="item in row.renewalUIs">
								<span ng-if="item.patentUI.clientRef.length">
									{{item.patentUI.clientRef}}<br>
								</span>								
							</span>
							<select ng-if="row.renewalUIs.length > 1" ng-options="item.patentUI.clientRef for item in row.renewalUIs" ng-model="data.selectedRefOption" class="pill-radius p-select-option border-xs-grey">
								<option value="" disabled selected>Multiple</option>									
							</select>			        	
				        </td>
				        <td width="15%" title="'Transaction Initiated'" filter="{ 'transStartDateUI': 'text'}" sortable="'transStartDateUI'">
				        	{{row.transStartDate | date: 'MM/dd/yy'}}
				        </td>				        
				        <td width="10%" title="'Cost'" filter="{ 'transAmount_USD': 'text'}" sortable="'transAmount_USD'">
				        	$ {{row.transAmount_USD}}
				        </td>
				        <td width="20%" title="'Status'" filter="{ 'latestTransStatus': 'text'}" sortable="'latestTransStatus'">
							<p class="font-weight-bold">
								<span ng-if="row.hasFailed">Failed</span>
								<span ng-if="!row.hasFailed">{{row.latestTransStatus}}</span>
							</p>
							<div class="progress-tracker progress-trans">
								<div ng-if="row.hasFailed">
									<uib-progress><uib-bar class="pill-radius bg-phase-red"  value="row.renewalProgress" value="" max="100" class="tracker-item"></uib-bar></uib-progress>									
								</div>
								<div ng-if="row.hasFailed !== true">
									<uib-progress><uib-bar class="pill-radius bg-phase-green"  value="row.renewalProgress" value="" max="100" class="tracker-item"></uib-bar></uib-progress>										
								</div>
							</div>	
				        </td>      				                 
				    </tr>
				</table>
			</div>
		</div>
	</div>
</div>
<div class="animate-show" ng-show="$ctrl.transInfoContent">
	<div ui-view></div>	
</div>


