<transactionnav></transactionnav>

<form class="form-inline mb-2">
	<div class="form-group">
		<div class="input-group">
			<div class="input-group-addon"><i class="fa fa-search"></i></div>
			<input type="text" class="form-control mr-2" id="transId" name="transId" ng-model="searchTrans">
		</div>
	</div>
</form>

<div class="row">
	<div class="col-md-12">
		<table class="table table-bordered table-striped text-md-center scroll">
			<thead class="thead-inverse">
				<tr>
					<td width="15%" class="align-middle">
						<a ng-click="$ctrl.sortType = 'transId'; $ctrl.sortReverse = !$ctrl.sortReverse">Transaction ID <!--show if not showing(false)-->
							<span ng-show="$ctrl.sortType == 'transId' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'transId' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>
					</td>
					<td width="10%" class="align-middle">
						<a ng-click="$ctrl.sortType='patentTotal'; $ctrl.sortReverse = !$ctrl.sortReverse">No. of patents 
							<span ng-show="$ctrl.sortType == 'patentTotal' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'patentTotal' && $ctrl.sortReverse" class="fa fa-caret-down"></span>							
						</a>
					</td>
					<td width="15%" class="align-middle">
						<a ng-click="$ctrl.sortType='patentApplicationNumber'; $ctrl.sortReverse=!$ctrl.sortReverse">App No.
							<span ng-show="$ctrl.sortType == 'patentApplicationNumber' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'patentApplicationNumber' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>
					</td>
					<td width="20%" class="align-middle">
						<a ng-click="$ctrl.sortType='clientRef'; $ctrl.sortReverse=!$ctrl.sortReverse">Client Ref
							<span ng-show="$ctrl.sortType == 'clientRef' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'clientRef' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>
					</td>					
					<td width="10%" class="align-middle">
						<a ng-click="$ctrl.sortType='transDate'; $ctrl.sortReverse=!$ctrl.sortReverse">Transaction Initiated
							<span ng-show="$ctrl.sortType == 'transDate' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'transDate' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>
					</td>
					<td width="10%" class="align-middle">
						<a ng-click="$ctrl.sortType='cost'; $ctrl.sortReverse=!$ctrl.sortReverse">Cost
							<span ng-show="$ctrl.sortType == 'cost' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'cost' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>	
					</td>
					<td width="20%" class="align-middle">
						<a ng-click="$ctrl.sortType='status'; $ctrl.sortReverse=!$ctrl.sortReverse">Status
							<span ng-show="$ctrl.sortType == 'status' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
							<span ng-show="$ctrl.sortType == 'status' && $ctrl.sortReverse" class="fa fa-caret-down"></span>			
						</a>
					</td>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="transaction in $ctrl.transactions | orderBy:$ctrl.sortType:$ctrl.sortReverse | filter:searchTrans">
					<td width="15%">
						<a ui-sref="current-transactions.current-transaction-item({transId: transaction.id})">{{transaction.p3S_TransRef}}</a>
					</td>
					<td width="10%">
						{{transaction.transStartDateUI}}
					</td>
					<td width="15%">
						<span ng-if="transaction.renewalUIs.length == 1" ng-repeat="item in transaction.renewalUIs">
							<span ng-if="item.patentUI.patentApplicationNumber.length">
								{{item.patentUI.patentApplicationNumber}}<br>
							</span>								
						</span>
						<select ng-if="transaction.renewalUIs.length > 1" ng-options="item.patentUI.patentApplicationNumber for item in transaction.renewalUIs" ng-model="data.selectedOption">
							<option value="" disabled selected>Multiple</option>									
						</select>						

					</td>
					<td width="20%">
						<span ng-repeat="item in transaction.renewalUIs">{{item.patentUI.clientRef}}<br></span>	
					</td>
					<td width="10%">{{transaction.transStartDateUI}}</td>
					<td width="10%">{{transaction.transAmount_USD}}</td>
					<td width="20%">
						<p>{{transaction.latestTransStatus}}</p>
						<div class="progress-tracker">
						<uib-progress><uib-bar value="transaction.renewalProgress" value="" max="100" class="tracker-item"></uib-bar></uib-progress>
							
						</div>						
					</td>
				</tr>
			</tbody>
		</table>
		<div ui-view></div>	
	</div>
</div>				


