<!--patentDetailctrl-->
<div class="row m-b-md">
	<div class="col-md-12">
		<div class="view-tabs">
			<ul class="nav view-pills">
				<li class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs btn--lg font-h4 bg-white border-grey-xs" ng-click="$ctrl.activeSelectedTab = 0; $ctrl.activePatentItemMenu = 'Patent Info'" ng-class="{active : $ctrl.activePatentItemMenu === 'Patent Info'}">Patent Info</li>
				<li class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs btn--lg font-h4 bg-white border-grey-xs" ng-click="$ctrl.activeSelectedTab = 1; $ctrl.activePatentItemMenu = 'Cost Analysis'" ng-class="{active : $ctrl.activePatentItemMenu === 'Cost Analysis'}">Cost Analysis</li>
				<li class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs btn--lg font-h4 bg-white border-grey-xs" ng-click="$ctrl.activeSelectedTab = 2; $ctrl.activePatentItemMenu = 'Renewal History'" ng-class="{active : $ctrl.activePatentItemMenu === 'Renewal History'}">Renewal History</li>
			</ul>
		</div>
	</div>
</div>

<div class="content-panel border-grey-xs">
	<div class="bg-white">
		<uib-tabset type="pills" active="$ctrl.activeSelectedTab">
			<uib-tab heading="Patent Information" class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs font-lg bg-white border-grey-xs active m-b-md" index="0" ng-hide="true">
					<div class="content-panel__head border-grey-xs--btm">
						<div class="row d-flex align-items-center">
						    <div class="col-md-4">
								<p class="font-h4 m-b-xs"><span class="font-weight-bold">Application Number:</span> {{$ctrl.patent.patentApplicationNumber}}</p>
								<p class="font-h4"><span class="font-weight-bold">Status:</span> {{$ctrl.patent.renewalStatus}}</p>				
						    </div>
						    <div class="col-md-5" ng-if="$ctrl.patent.renewalStatus == 'Show price'">
								<div class="row">
									<div class="col-md-12">
										<div class="text-center inline-container m-b-xs" ng-style="{'width': $ctrl.patent.progressBar + '%'}">
											<span class="font-h4 font-weight-medium nowrap" ng-class="($ctrl.patent.costBandColour == 'Green' ? 'txt-phase-green': '') + '' + ($ctrl.patent.costBandColour == 'Amber' ? 'txt-phase-amber': '') + '' + ($ctrl.patent.costBandColour == 'Red' ? 'txt-phase-blue': '') + '' + ($ctrl.patent.costBandColour == 'Blue' ? 'txt-phase-blue': '') + '' + ($ctrl.patent.costBandColour == 'Black' ? 'txt-phase-white': '')">$ {{$ctrl.patent.currentRenewalCost}}</span>
										</div>
										<div class="text-center inline-container m-b-xs"  ng-style="{'width': ((100 - $ctrl.patent.progressBar) - 1)  + '%'}">
											<span class="font-h4 font-weight-medium nowrap" ng-class="($ctrl.patent.costBandColour == 'Green' ? 'txt-phase-amber': '') + '' + ($ctrl.patent.costBandColour == 'Amber' ? 'txt-phase-red': '') + '' + ($ctrl.patent.costBandColour == 'Red' ? 'txt-phase-blue': '') + '' + ($ctrl.patent.costBandColour == 'Blue' ? 'txt-phase-black': '') + '' + ($ctrl.patent.costBandColour == 'Black' ? 'txt-phase-white': '')">$ {{$ctrl.patent.renewalCostNextStageUSD}}</span>
										</div>		
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<uib-progress class="pill-radius progress-bar-tall" ng-class="($ctrl.patent.costBandColour == 'Green' ? 'bg-phase-amber': '') + '' + ($ctrl.patent.costBandColour == 'Amber' ? 'bg-phase-red': '') + '' + ($ctrl.patent.costBandColour == 'Red' ? 'bg-phase-blue': '') + '' + ($ctrl.patent.costBandColour == 'Blue' ? 'bg-phase-black': '') + '' + ($ctrl.patent.costBandColour == 'Black' ? 'bg-phase-white': '')"><uib-bar class="pill-radius progress-bar-tall font-body d-flex align-items-center justify-content-center font-weight-bold progress-10" value="$ctrl.progressBar">{{$ctrl.patent.progressBar}}%</uib-bar></uib-progress>											
									</div>	
								</div>
						    </div>
						    <div ng-class="($ctrl.patent.renewalStatus == 'Show price' ? 'col-md-3': 'col-md-8')">
								<div ng-if="$ctrl.patent.renewalStatus !== 'Show price'" class="d-flex justify-content-end align-items-center">
									<div class="m-r-xs">
										<img ng-if="$ctrl.patent.renewalStatus == 'Payment in progress'" src="p3sweb/assets/imgs/icons/progress_icon.png">
										<img ng-if="$ctrl.patent.renewalStatus == 'EPO Instructed'" src="p3sweb/assets/imgs/icons/epo_instructed_icon.png">
										<img ng-if="$ctrl.patent.renewalStatus == 'Renewal in place'" src="p3sweb/assets/imgs/icons/complete_icon.png">
										<img ng-if="$ctrl.patent.renewalStatus == 'Too late to renew'" src="p3sweb/assets/imgs/icons/lapsed_icon.png">
										<img ng-if="$ctrl.patent.renewalStatus == ('No renewal needed' || 'Show price')" src="p3sweb/assets/imgs/icons/renewal_na_icon.png">
									</div>
							    	<p class="font-weight-medium font-h4 d-flex justify-content-end align-items-center">{{$ctrl.patent.renewalStatus}}</p>
						    	</div>						    			    	
						    	<div ng-if="$ctrl.patent.renewalStatus == 'Show price'" class="text-right">
							    	<p class="font-h4 m-b-xs"><span class="font-weight-bold">Next stage: </span> <span ng-class="($ctrl.patent.costBandColour == 'Green' ? 'txt-phase-amber': '') + '' + ($ctrl.patent.costBandColour == 'Amber' ? 'txt-phase-red': '') + '' + ($ctrl.patent.costBandColour == 'Red' ? 'txt-phase-blue': '') + '' + ($ctrl.patent.costBandColour == 'Blue' ? 'txt-phase-black': '') + '' + ($ctrl.patent.costBandColour == 'Black' ? 'txt-phase-white': '')">{{$ctrl.nextStage()}}</span></p>
							    	<p class="font-h4"><span class="font-weight-bold">Occurs: </span> {{$ctrl.patent.costBandEndDateUI}}</p>
						    	</div>
						    </div>		    		    
					    </div>
				    </div>
				   
			    	<div class="row">
			    		<div class="col-md-9 border-grey-xs--right p-r-none">
			    			<div class="content-panel__body">
				    			<form class="form" ng-submit="$ctrl.updatePatent($ctrl.patent)">
				    				<div class="row">
					    				<div class="col-md-6">
					    					<p class="font-h4 font-weight-medium m-b-sm">Details</p>
					    					<form class="form-inline">
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Description: </label>
													<div class="col-md-8">
														<div class="d-flex justify-content-between align-items-center">
															<span class="font-body" ng-hide="$ctrl.editing[1]">{{$ctrl.patent.shortTitle}}</span>
													        <input type="text" class="font-body form-control m-r-sm" data-id="123" ng-show="$ctrl.editing[1]" ng-blur="$ctrl.doneEditing(1)" ng-model="$ctrl.patent.shortTitle" autofocus>
													        <span ng-click="$ctrl.editItem(1)"><i class="fa fa-edit fa-2x"></i></span>
														</div>
													</div>
												</div>
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Client Ref: </label>
													<div class="col-md-8">
														<div class="d-flex justify-content-between align-items-center">
													 		<span class="font-body" ng-hide="$ctrl.editing[2]">{{$ctrl.patent.clientRef}}</span>
											        		<input type="text" class="font-body form-control" data-id="123" ng-show="$ctrl.editing[2]" ng-blur="$ctrl.doneEditing(2)" ng-model="$ctrl.patent.clientRef" autofocus>
											        		<span ng-click="$ctrl.editItem(2)"><i class="fa fa-edit fa-2x"></i></span>
										        		</div>
									        		</div>	
												</div>
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Applicant Name: </label>
													<div class="col-md-8">
										        		<input type="text" class="font-body form-control" data-id="123" ng-model="$ctrl.patent.primaryApplicantName" readonly>
										        	</div>
												</div>
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Publication No: </label>
													<div class="col-md-8">
											        	<input type="text" class="font-body form-control" data-id="123" ng-model="$ctrl.patent.patentPublicationNumber" readonly>
											        </div>
												</div>
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Title: </label>
													<div class="col-md-8">
											        	<input type="text" class="font-body form-control" data-id="123" ng-model="$ctrl.patent.title" readonly>
											        </div>
												</div>	
												<div class="form-group row">
													<label class="font-body font-weight-medium col-md-4 d-flex align-items-center">Filing date: </label>
													<div class="col-md-8">
											        	<input type="text" class="font-body form-control" data-id="123" ng-model="$ctrl.patent.filingDateUI" readonly>
											        </div>
												</div>																						
											</form>
										</div>
										
							    		<div class="col-md-6 notification-pills">
							    			<div class="m-b-md">
							    				<div class="m-b-md">
													<h4 class="font-weight-medium">Notifications</h4>
												</div>
												<p class="font-body">Simply select the colour and time frame to receive email notifications for this patent prior to each stage. You can select as many or few as you want or click default for all predetermined notifications.</p>					    				
							    			</div>
							    			<div class="row m-b-md">
							    				<div class="col-md-12 d-flex align-items-center justify-content-between">
							    					<p class="font-h4 font-weight-medium">Selected</p>
													<div class="pill-radius pill-tabs btn--lg font-body--component" ng-style="{ 'background': $ctrl.colourPhaseTitle.color}">
														<span class="font-body font-weight-medium font-body--component txt-white">{{$ctrl.colourPhaseTitle.title}} Stage</span>
													</div>								    					
							    				</div>
							    			</div>
											<div class="row">
												<div class="col-md-12">
													<div class="notification-tabs">
														<ul class="nav d-flex justify-content-between">
															<li class="green-notification pill-radius pill-tabs btn--reg font-body font-body--component bg-white border-grey-xs active d-flex justify-content-center align-items-center m-b-xs" ng-init="activeNotificationTab = 0;" ng-click="activeNotificationTab = 0; $ctrl.displayNotifications($ctrl.patentNotifications.green); $ctrl.colourKey(0);" ng-class="{'txt-white bg-phase-green': activeNotificationTab == 0, 'bg-white txt-phase-green': activeNotificationTab !== 0}">Green</li>
															<li class="amber-notification pill-radius pill-tabs btn--reg font-body font-body--component bg-white border-grey-xs d-flex justify-content-center align-items-center m-b-xs" ng-click="activeNotificationTab = 1; $ctrl.displayNotifications($ctrl.patentNotifications.amber); $ctrl.colourKey(1);" ng-class="{'txt-white bg-phase-amber': activeNotificationTab == 1, 'bg-white txt-phase-amber': activeNotificationTab !== 1}">Amber</li>
															<li class="red-notification pill-radius pill-tabs btn--reg font-body font-body--component bg-white border-grey-xs d-flex justify-content-center align-items-center m-b-xs" ng-click="activeNotificationTab = 2; $ctrl.displayNotifications($ctrl.patentNotifications.red); $ctrl.colourKey(2);" ng-class="{'txt-white bg-phase-red': activeNotificationTab == 2, 'bg-white txt-phase-red': activeNotificationTab !== 2}">Red</li>
															<li class="blue-notification pill-radius pill-tabs btn--reg font-body font-body--component bg-white border-grey-xs active d-flex justify-content-center align-items-center m-b-xs" ng-click="activeNotificationTab = 3; $ctrl.displayNotifications($ctrl.patentNotifications.blue); $ctrl.colourKey(3);" ng-class="{'txt-white bg-phase-blue': activeNotificationTab == 3, 'bg-white txt-phase-blue': activeNotificationTab !== 3}">Blue</li>
															<li class="black-notification pill-radius pill-tabs btn--reg font-body font-body--component bg-white border-grey-xs active d-flex justify-content-center align-items-center m-b-xs" ng-click="activeNotificationTab = 4; $ctrl.displayNotifications($ctrl.patentNotifications.black); $ctrl.colourKey(4);" ng-class="{'txt-white bg-phase-black': activeNotificationTab == 4, 'bg-white txt-phase-black': activeNotificationTab !== 4}">Black</li>
														</ul>
													</div>
												</div>
												<div class="col-md-12">
													<uib-tabset active="activeNotificationTab" vertical="true" type="pills" class="flex-column">
														<uib-tab index="0" heading="Green" ng-attr-id="$ctrl.patentNotifications.green" ng-click="$ctrl.displayNotifications($ctrl.patentNotifications.green)" ng-hide="true">
															<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">
																<div class="col-md-3 font-body text-center" ng-repeat="item in checkbox">
																	{{item.title}}
																	<div class="onoffswitch">
																		<label class="switch font-body">
																		  <input type="checkbox" ng-model="item.isOn">
																		  <span class="slider round bg-phase-green"></span>
																		</label>
																	</div>
																</div>
															</div>	
													    </uib-tab>
													    <uib-tab index="1" heading="Amber" ng-attr-id="$ctrl.patentNotifications.amber" ng-click="$ctrl.displayNotifications($ctrl.patentNotifications.amber)" ng-hide="true">
															<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">
																<div class="col-md-3 font-body text-center" ng-repeat="item in checkbox">
																	{{item.title}}
																	<div class="onoffswitch">
																		<label class="switch font-body">
																		  <input type="checkbox" ng-model="item.isOn">
																		  <span class="slider round bg-phase-amber"></span>
																		</label>
																	</div>
																</div>
															</div>								    
														</uib-tab>
													    <uib-tab index="2" heading="Red" ng-attr-id="$ctrl.patentNotifications.red" ng-click="$ctrl.displayNotifications($ctrl.patentNotifications.red)" ng-hide="true">
															<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">
																<div class="col-md-3 font-body text-center" ng-repeat="item in checkbox">
																	{{item.title}}
																	<div class="onoffswitch">
																		<label class="switch font-body">
																		  <input type="checkbox" ng-model="item.isOn">
																		  <span class="slider round bg-phase-red"></span>
																		</label>
																	</div>
																</div>
															</div>								    
														</uib-tab>
													    <uib-tab index="3" heading="Blue" ng-attr-id="$ctrl.patentNotifications.blue" ng-click="$ctrl.displayNotifications($ctrl.patentNotifications.blue)"  ng-hide="true">
															<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">
																<div class="col-md-3 font-body text-center" ng-repeat="item in checkbox">
																	{{item.title}}
																	<div class="onoffswitch">
																		<label class="switch font-body">
																		  <input type="checkbox" ng-model="item.isOn">
																		  <span class="slider round bg-phase-blue"></span>
																		</label>
																	</div>
																</div>
															</div>								    
														</uib-tab>
													    <uib-tab index="4" heading="Black" ng-attr-id="$ctrl.patentNotifications.black" ng-click="$ctrl.displayNotifications($ctrl.patentNotifications.blue)" ng-hide="true">
															<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">	
																<div class="col-md-3 font-body text-center" ng-repeat="item in checkbox">
																	{{item.title}}
																	<div class="onoffswitch">
																		<label class="switch font-body">
																		  <input type="checkbox" ng-model="item.isOn">
																		  <span class="slider round bg-phase-black"></span>
																		</label>
																	</div>
																</div>
															</div>								    
														</uib-tab>	
													</uib-tabset>
												</div>
											</div>
										</div> <!--col-md-6-->
									</div>								
									<div class="row">
										<div class="col-md-12">
											<input type="submit" id="submit" class="btn btn--lg pill-radius bg-phase-green font-body font-body--component txt-white font-weight-medium m-r-sm" value="Save">
											<input type="button" id="delete" class="btn btn--lg pill-radius bg-phase-red font-body font-body--component txt-white font-weight-medium" value="Remove" ng-click="$ctrl.deletePatent($ctrl.patent.id)">
										</div>
									</div>
								</form>
							</div>
						</div>

						<div class="col-md-3 p-l-none" ng-if="$ctrl.patent.renewalStatus !== ('Renewal in place' || 'Too late to renew')">
							<div class="content-panel__body">
								<div class="m-b-md">
									<h4 class="font-weight-medium m-b-xs">FX Rate Impact</h4>
								</div>
								<div class="border-grey-xs--btm m-b-md">
									<div class="row p-b-md m-b-md">
										<div class="col-md-5 text-center">
											<p class="font-h4 font-weight-medium m-b-xs">USD</p>
											<p class="font-h3">$ {{$ctrl.patent.feeUI.subTotalUSD}}</p>
										</div>
										<div class="col-md-2 text-center">
											<img src="p3sweb/assets/imgs/icons/arrows_icons_sm.png">
										</div>
										<div class="col-md-5 text-center">
											<p class="font-h4 font-weight-medium m-b-xs">EUR</p>
											<p class="font-h3">€ {{$ctrl.patent.feeUI.subTotalEUR}}</p>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Yesterday's price:</p>
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ {{$ctrl.yesterdaysPrice}}</p>
											</div>																								
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Price last week:</p>			
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ {{$ctrl.lastWeeksPrice}}</p>
											</div>												
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Price last month:</p>
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ {{$ctrl.lastMonthsPrice}}</p>
											</div>												
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-bold">4 week variation:</p>	
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ {{$ctrl.lastMonthsPrice - $ctrl.yesterdaysPrice}}</p>
											</div>												
										</div>																																						
									</div>
								</div> <!-- row end -->
								<div class="row">
									<div class="col-md-12 d-flex align-items-center flex-column">
										<div ng-if="$ctrl.patent.renewalStatus == 'Show price'">
											<div class="row">
										 		<ngcart-addtocart id="{{$ctrl.selectedPatent.id}}" class="cartbtn font-weight-bold btn-block" name="patent_{{$ctrl.selectedPatent.id}}" price="{{$ctrl.selectedPatent.currentRenewalCost}}" quantity="1" quantity-max="10" data="$ctrl.selectedPatent">
					 							</ngcart-addtocart>		
											</div>
										</div>
							        	<div ng-if="$ctrl.patent.renewalStatus == ('Payment in progress' || 'EPO Instructed')" class="w-100">
									 		<a class="btn btn-block pill-radius bg-phase-green font-body font-body--component font-weight-medium cartbtn txt-white cursor-pointer" ng-click="$ctrl.fetchItemTransaction($ctrl.patent.id)">View Transaction<i class="fa fa-credit-card fa-1x m-l-xs"></i></a>
									 	</div>
							        	<div ng-if="$ctrl.patent.renewalStatus == 'Renewal in place'" class="w-100">
									 		<a class="btn btn-block pill-radius bg-phase-green font-body font-body--component font-weight-medium txt-white cursor-pointer" ui-sref="patents.patent({patentId: $ctrl.patent.id})" ng-click="$ctrl.fetchItemRenewal()">View Renewal<i class="fa fa-refresh fa-1x m-l-xs"></i></a>
									 	</div>											
									</div>
								</div>	
							</div>
						</div>	
					
						<div class="col-md-3 p-l-none" ng-if="$ctrl.patent.renewalStatus == ('Renewal in place' || 'Too late to renew')">
							<div class="content-panel__body">
								<div class="m-b-md">
									<h4 class="font-weight-medium m-b-xs">FX Rate Impact</h4>
								</div>
								<div class="border-grey-xs--btm m-b-md">
									<div class="row p-b-md m-b-md">
										<div class="col-md-5 text-center">
											<p class="font-h4 font-weight-medium m-b-xs">USD</p>
											<p class="font-h3">$ 0.00</p>
										</div>
										<div class="col-md-2 text-center">
											<img src="p3sweb/assets/imgs/icons/arrows_icons_sm.png">
										</div>
										<div class="col-md-5 text-center">
											<p class="font-h4 font-weight-medium m-b-xs">EUR</p>
											<p class="font-h3">€ 0.00</p>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Yesterday's price:</p>
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ 0.00</p>
											</div>																								
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Price last week:</p>			
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ 0.00</p>
											</div>												
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-medium">Price last month:</p>
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ 0.00</p>
											</div>												
										</div>
										<div class="row m-b-sm">
											<div class="col-md-6">
												<p class="font-body font-weight-bold">4 week variation:</p>	
											</div>
											<div class="col-md-6">
												<p class="font-body text-center">$ 0.00</p>
											</div>												
										</div>																																						
									</div>
								</div> <!-- row end -->
								<div class="row">
									<div class="col-md-12 d-flex align-items-center flex-column">
										<div ng-if="$ctrl.patent.renewalStatus == 'Show price'">
											<div class="row">
										 		<ngcart-addtocart id="{{$ctrl.selectedPatent.id}}" class="cartbtn font-weight-bold btn-block" name="patent_{{$ctrl.selectedPatent.id}}" price="{{$ctrl.selectedPatent.currentRenewalCost}}" quantity="1" quantity-max="10" data="$ctrl.selectedPatent">
					 							</ngcart-addtocart>		
											</div>
										</div>
							        	<div ng-if="$ctrl.patent.renewalStatus == ('Payment in progress' || 'EPO Instructed')" class="w-100">
									 		<a class="btn btn-block pill-radius bg-phase-green font-body font-body--component font-weight-medium cartbtn txt-white cursor-pointer" ng-click="$ctrl.fetchItemTransaction($ctrl.patent.id)">View Transaction<i class="fa fa-credit-card fa-1x m-l-xs"></i></a>
									 	</div>
							        	<div ng-if="$ctrl.patent.renewalStatus == 'Renewal in place'" class="w-100">
									 		<a class="btn btn-block pill-radius bg-phase-green font-body font-body--component font-weight-medium txt-white cursor-pointer" ui-sref="patents.patent({patentId: $ctrl.patent.id})" ng-click="$ctrl.fetchItemRenewal()">View Renewal<i class="fa fa-refresh fa-1x m-l-xs"></i></a>
									 	</div>											
									</div>
								</div>	
							</div>	
					    </div><!-- col-md-3-->					    
				    </div>
				
		    </uib-tab>
		    <uib-tab heading="Cost Analysis" class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs font-lg bg-white border-grey-xs m-b-md" index="1" ng-hide="true">
		    	<div class="content-panel__body">
		    		<div class="row">
		    			<div class="col-md-8">
		    				<div class="row">
		    					<div class="col-md-12">
			    					<div class="view-tabs m-b-md">
										<ul class="nav chart-pills">
											<li class="nav-item nav-view-list-item pill-radius btn--lg pill-tabs font-h4 bg-white border-grey-xs" ng-click="activeChart = 0; $ctrl.chartActive = 'Stage Cost Chart'" ng-class="{active : $ctrl.chartActive === 'Stage Cost Chart'}">Stage Cost Chart</li>
											<li class="nav-item nav-view-list-item pill-radius btn--lg pill-tabs font-h4 bg-white border-grey-xs" ng-click="activeChart = 1; $ctrl.chartActive = 'FX Chart'" ng-class="{active : $ctrl.chartActive === 'FX Chart'}">FX Chart</li>
										</ul>
									</div>	
		    					</div>
		    				</div>

		    				<div class="row">
								<div class="col-md-12 text-xs-left">
								  	<uib-tabset type="pills" active="activeChart">
								    	<uib-tab heading="Stage Cost Chart" classes="btn btn-primary" index="0" ng-hide="true">
									    	<canvas id="patentBarChart" class="chart chart-horizontal-bar" chart-data="$ctrl.barData" chart-labels="$ctrl.barLabels" chart-series="$ctrl.barSeries" chart-options="$ctrl.barOptions" chart-colors="$ctrl.barChartColours" chart-dataset-override="$ctrl.barDatasetOverride" height="100px"></canvas>
									    </uib-tab>
									    <uib-tab heading="FX Chart" classes="btn btn-primary" index="1" ng-hide="true">
							 				<canvas id="patentLineChart" class="chart chart-line" chart-data="$ctrl.lineData" chart-labels="$ctrl.lineLabels" chart-series="$ctrl.lineSeries" chart-options="$ctrl.lineOptions" chart-dataset-override="$ctrl.lineDatasetOverride" height="100px"></canvas>
							    		</uib-tab>
						    		</uib-tabset>
				    			</div>
		    				</div>
	    				</div>

						<div class="col-md-4 d-flex flex-column justify-content-between">
							<div class="row d-flex justify-content-center align-items-center">
								<div class="col-md-6">
									<h4 class="font-weight-medium font-h4">Cost breakdown</h4>
								</div>
								<div class="col-md-6">
									<p class="font-h4">1 USD = {{$ctrl.usd2eur}} EUR</p>
								</div>	
							</div>
							<div class="m-t-md">
								<table class="table">
									<thead>
										<tr>
											<td></td>
											<td class="font-h4 font-weight-medium">EUR</td>
											<td class="font-h4 font-weight-medium">USD</td>
										</tr>
									</thead>
									<div class="table-responsive">
										<tbody>
											<tr>
												<td class="font-body font-weight-medium">Official fee</td>
												<td class="font-body">€ {{$ctrl.feeBreakDown.renewalFeeEUR}}</td>
												<td class="font-body">$ {{$ctrl.feeBreakDown.renewalFeeUSD}}</td>
											</tr>
											<tr>
												<td class="font-body font-weight-medium">Processing fee</td>
												<td class="font-body">€ {{$ctrl.feeBreakDown.processingFeeEUR}}</td>
												<td class="font-body">$ {{$ctrl.feeBreakDown.processingFeeUSD}}</td>
											</tr>
											<tr>
												<td class="font-body font-weight-medium">Extension Fee</td>
												<td class="font-body">€ {{$ctrl.feeBreakDown.extensionFeeEur}}</td>
												<td class="font-body">$ {{$ctrl.feeBreakDown.extensionFeeUSD}}</td>
											</tr>								
											<tr>
												<td class="font-body font-weight-medium">Total</td>
												<td class="font-body font-weight-medium">€ {{$ctrl.feeBreakDown.subTotalEUR}}</td>
												<td class="font-body font-weight-medium">$ {{$ctrl.feeBreakDown.subTotalUSD}}</td>
											</tr>
										</tbody>
									</div>
								</table>
							</div>
							
							<div class="row m-t-md">
								<div class="col-md-7">
									<p class="font-h3 font-weight-bold m-b-xs">Save:</p>
									<p class="font-h3 txt-phase-green m-b-xs font-weight-medium">$ {{$ctrl.feeBreakDown.bandSaving().savings}}</p>
									<p class="font-h4">Renew before: {{$ctrl.feeBreakDown.bandSaving().renewBefore | date: dd-mm-yy}}</p>
								</div>
								<div class="col-md-5 d-flex align-items-end">
						        	<div ng-if="$ctrl.patent.renewalStatus == ('Payment in progress' || 'EPO Instructed')">
								 		<a class="btn btn--lg pill-radius bg-phase-green font-body font-body--component font-weight-medium cartbtn txt-white cursor-pointer" ng-click="$ctrl.fetchItemTransaction($ctrl.patent.id)">View Transaction</a>
								 	</div>
						        	<div ng-if="$ctrl.patent.renewalStatus == 'Renewal in place'">
								 		<a class="btn btn--lg pill-radius bg-phase-green font-body font-body--component font-weight-medium txt-white cursor-pointer" ui-sref="patents.patent({patentId: $ctrl.patent.id})" ng-click="$ctrl.fetchItemRenewal()">View Renewal<i class="fa fa-refresh fa-1x m-l-xs"></i></a>
								 	</div>																		
									<div ng-if="$ctrl.patent.renewalStatus == 'Show price'">
								 		<ngcart-addtocart id="{{$ctrl.selectedPatent.id}}" class="cartbtn btn-block" name="patent_{{$ctrl.selectedPatent.id}}" price="{{$ctrl.selectedPatent.currentRenewalCost}}" quantity="1" quantity-max="10" data="$ctrl.selectedPatent">
								 		</ngcart-addtocart>
								 	</div>
								</div>						
							</div> <!-- row end-->
						</div>
					</div>
				</div>
			</uib-tab>
		    <uib-tab heading="Renewal History" class="nav-item nav-view-list-item pill-radius p-page-nav-tabs pill-tabs font-lg bg-white border-grey-xs m-b-md"  index="2"  ng-hide="true">

		    	<div class="content-panel__head border-grey-xs--btm">
		    		<div class="row">
						<div class="col-md-2">
							<h4 class="font-weight-bold font-h4 m-b-xs">App No.</h4>
							<p class="font-h4">{{$ctrl.patent.patentApplicationNumber}}</p>
						</div>
						<div class="col-md-2">
							<h4 class="font-weight-bold font-h4 m-b-xs">Client Ref</h4>
							<p class="font-h4">{{$ctrl.patent.clientRef}}</p>
						</div>
						<div class="col-md-8 text-right">
							<h4 class="font-weight-bold font-h4 m-b-xs">Description</h4>
							<p class="font-h4">{{$ctrl.patent.title}}</p>				
						</div>
					</div>
		    	</div>
				
				<div class="content-panel__body">
					<div class="row">
						<div class="col-md-12">
							<div ng-if="$ctrl.renewal.length == 0">
								<p class="font-weight-bold font-h4">This patent has not been renewed through Patent Place</p>
							</div>
							<div ng-if="$ctrl.renewal.length !== 0">
								<table class="table">
									<thead class="border-grey-xs--btm border-grey-xs--top">
										<tr>
											<td class="font-h4 font-weight-bold" width="20%" ng-click="$ctrl.sortType = 'renewalYear'; $ctrl.sortReverse = !$ctrl.sortReverse">Renewal Year
												<span ng-show="$ctrl.sortType == 'renewalYear' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
												<span ng-show="$ctrl.sortType == 'renewalYear' && $ctrl.sortReverse" class="fa fa-caret-down"></span>
											</td>
											<td class="font-h4 font-weight-bold"  width="20%" ng-click="$ctrl.sortType = 'dateRenewed'; $ctrl.sortReverse = !$ctrl.sortReverse">Date Renewed
												<span ng-show="$ctrl.sortType == 'dateRenewed' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
												<span ng-show="$ctrl.sortType == 'dateRenewed' && $ctrl.sortReverse" class="fa fa-caret-down"></span>
											</td>
											<td class="font-h4 font-weight-bold"  width="30%" ng-click="$ctrl.sortType = 'costBreakdown'; $ctrl.sortReverse = !$ctrl.sortReverse">Cost Breakdown
												<span ng-show="$ctrl.sortType == 'costBreakdown' && !$ctrl.sortReverse" class="fa fa-caret-up"></span>
												<span ng-show="$ctrl.sortType == 'costBreakdown' && $ctrl.sortReverse" class="fa fa-caret-down"></span>
											</td>
											<td class="font-h4 font-weight-bold" width="30%">Downloads</td>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="renewal in $ctrl.renewal | orderBy:$ctrl.sortType:$ctrl.sortReverse">
											<td class="font-body" width="20%">Year <span ng-bind="renewal.renewalYear"></span></td>
											<td class="font-body" width="20%">{{renewal.renewalDueDate | date: 'MM/dd/yy'}}</td>
											<td class="font-body" width="30%">
												<table class="table-borderless">
													<tr>
														<td class="font-body">Official Fee:</td>
														<td class="font-body">$ {{$ctrl.feeBreakDown.renewalFeeUSD}}</td>
													</tr>
													<tr class="border-grey-xs--btm">
														<td class="font-body">Processing Fee:</td>
														<td class="font-body">$ {{$ctrl.feeBreakDown.processingFeeEUR}}</td>
													</tr>														

													<tr>
														<td class="font-body font-weight-bold">Total: </td>
														<td class="font-body font-weight-bold">$ {{$ctrl.feeBreakDown.subTotalUSD}}</td>
													</tr>													
												</table>
											</td>

											<td width="30%">
												<div class="row">
													<div class="col-md-6 d-flex align-items-center">
														<a href="p3sweb/hardcodedpffolder/certificates/dummyCertificateNumber1.pdf" class="btn btn--lg font-body font-weight-medium bg-phase-green pill-radius txt-white d-flex align-items-center" download>Certificate <i class="fa fa-file-pdf-o fa-1x m-l-xs"></i></a></span>
													</div>
													<div class="col-md-6 d-flex align-items-center">
														<a href="p3sweb/hardcodedpffolder/invoices/dummyInvoiceNumber1.pdf" class="btn btn--lg font-body font-weight-medium bg-phase-green pill-radius txt-white d-flex align-items-center d-flex align-items-center" download>Invoice <i class="fa fa-file-pdf-o fa-1x m-l-xs"></i></a></span>
													</div>	
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</uib-tab>
		</uib-tabset>
	</div>
</div>


  
	    



	

			





