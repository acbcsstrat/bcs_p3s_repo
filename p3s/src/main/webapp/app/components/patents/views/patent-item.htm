<!--patentDetailctrl-->

    <div id="tabs">
        <ul>
            <li ng-repeat="tab in $ctrl.tabs"
                ng-class="{active:$ctrl.isActiveTab(tab.url)}"
                ng-click="$ctrl.onClickTab(tab)">{{tab.title}}</li> <!--applies active to the returned tab url -->
        </ul>

	    <div ng-include="$ctrl.currentTab"></div>

    </div>
    <script type="text/ng-template" id="patent-info.htm">
	    <div class="row">
		    <div class="col-md-12">
		    	<h2>Patent Information</h2>
				<h3>Application Number: {{$ctrl.patent.patentApplicationNumber}}</h3>
		    </div>
	    </div>

	    <div class="row">
		    <div class="col-md-12">
		    	<form ng-submit="$ctrl.updatePatent($ctrl.patent)">
			    	<div class="row">
			    		<div class="col-md-6">
							<table class="table">
						    	<tr>
								    <th class="text-xs-right">Short Name</th>
								    <td>
								        <span ng-hide="$ctrl.editing[1]">{{$ctrl.patent.shortTitle}}</span>
								        <input type="text" data-id="123" ng-show="$ctrl.editing[1]" ng-blur="$ctrl.doneEditing(1)" ng-model="$ctrl.patent.shortTitle" autofocus></input>
								    </td>
								    <td>
								    	<span ng-click="$ctrl.editItem(1)"><i class="fa fa-edit fa-lg"></i></span> 					    	
								    </td>
								</tr>
						    	<tr>
						    		<th class="text-xs-right">Client Reference</th>
								    <td>
								        <span  ng-hide="$ctrl.editing[2]">{{$ctrl.patent.clientRef}}</span>
								        <input type="text" data-id="123" ng-show="$ctrl.editing[2]" ng-blur="$ctrl.doneEditing(2)" ng-model="$ctrl.patent.clientRef" autofocus></input>
						         	</td>
								    <td>
								    	<span ng-click="$ctrl.editItem(2)"><i class="fa fa-edit fa-lg"></i></span> 					    	
								    </td>
								   						    		
						    	</tr>
						    	<tr>
						    		<th class="text-xs-right">Applicant Name</th>
						    		<td>{{$ctrl.patent.primaryApplicantName}}</td>
						    	</tr>
						    	<tr>
						    		<th class="text-xs-right">Publication Number</th>
						    		<td>{{$ctrl.patent.patentPublicationNumber}}</td>
						    	</tr>
						    	<tr>
						    		<th class="text-xs-right">Title</th>
						    		<td>{{$ctrl.patent.title}}</td>
						    	</tr>
						    	<tr>
						    		<th class="text-xs-right">Filing date</th>
						    		<td>{{$ctrl.patent.filingDateUI}}</td>
						    	</tr>
						    </table>
				    	</div>
						<div class="col-md-6">
							<div class="row">
								<div class="col-md-4 text-xs-left">
									<h4>Cost</h4>
									<p>{{$ctrl.patent.currentRenewalCost}}</p>
								</div>

								<div class="col-md-8 text-xs-left">
									<h4>Status</h4>
									<p>{{$ctrl.patent.renewalStatus}}</p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<h4>Patent Notifications</h4>
									<div class="row" ng-repeat="checkbox in $ctrl.chunkedData">
										<div class="col-md-4" ng-repeat="item in checkbox">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="item.isOn">{{item.title}}
											</label>
										</div>
									
									</div>
								</div>
							</div>			
						</div>
					</div>
					<div class="row">
						<div class="col-md-4 offset-md-8">
							<div class="row">
								<div class="col-md-6">
									<input type="submit" id="submit" class="btn btn-block btn-lg btn-success" value="Update">
								</div>	
								<div class="col-md-6">
									<input type="button" id="delete" class="btn btn-block  btn-lg btn-danger" value="Delete"  ng-click="$ctrl.deletePatent($ctrl.patent.id)">
								</div>	
							</div>
						</div>		
					</div>
				</form>
			</div>
		</div>
	</script>
	<script type="text/ng-template" id="cost-analysis.htm">
		<div class="col-md-12 text-xs-left">
			<h2>Cost Analysis</h2>
			<h3>Application Number: {{$ctrl.patent.patentApplicationNumber}}</h3>
			<div class="row">
				<div class="col-md-6">
					<canvas id="patentLineChart" class="chart chart-line" chart-data="$ctrl.lineData" chart-labels="$ctrl.lineLabels" chart-series="$ctrl.lineSeries" chart-options="$ctrl.lineOptions" chart-dataset-override="$ctrl.lineDatasetOverride"></canvas>
				</div>
				<div class="col-md-6">
					<canvas id="patentBarChart" class="chart chart-bar"
					  chart-data="$ctrl.barData" chart-labels="$ctrl.barLabels" chart-series="$ctrl.barSeries" chart-options="$ctrl.barOptions" chart-dataset-override="$ctrl.barDatasetOverride">
					</canvas>
				</div>
				<div class="col-md-6">
					<table class="table table-bordered">
						<thead>
							<tr>
								<td class="font-weight-bold">Fee Make-up</td>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="font-weight-bold">Official fee</td>
								<td>{{$ctrl.feeBreakDown.renewalFeeUSD}}</td>
							</tr>
							<tr>
								<td class="font-weight-bold">Processing fee</td>
								<td>{{$ctrl.feeBreakDown.processingFeeUSD}}</td>
							</tr>
							<tr>
								<td class="font-weight-bold">Exchange rate USD/EUR</td>
								<td>{{$ctrl.feeBreakDown.fxRate}}</td>
							</tr>
							<tr>
								<td class="font-weight-bold">Sub-total</td>
								<td>{{$ctrl.feeBreakDown.subTotal_USD}}</td>
							</tr>							
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</script>
	<script type="text/ng-template" id="renewal-history.htm">
		<div class="col-md-12 text-xs-left">
			<h2>Renewal History</h2>
			<h3>Application Number: {{$ctrl.patent.patentApplicationNumber}}</h3>
			<div class="row" ng-repeat="renewal in $ctrl.renewal">
				<div class="col-md-12">
					<table class="table table-inverse">
						<thead>
							<tr>
								<td>Client Reference: <span ng-bind="renewal.clientRef"></span></td>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Renewal year: <span ng-bind="renewal.renewalYear"></span></td>
								<td>Renewal due date: <span ng-bind="renewal.renewalDueDateUI"></span></td>
								<td>Fee make up: <span ng-bind="renewal.currentRenewalCost"></span></td>
								<td>Breakdown fee: <span ng-bind="renewal.renewalCostNextStage"></span></td>
								<td><button class="btn btn-block btn-success">Download certificate</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			
		</div>
	</script>
